<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
 * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
 * Copyright 2022 Xyna GmbH, Germany
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
-->
<Service xmlns="http://www.gip.com/xyna/xdev/xfractmod" ID="1" Label="Query With Test Data Support" TypeName="QueryWithTestDataSupport" TypePath="xdev.xtestfactory.infrastructure.util" Version="1.8">
  <Meta>
    <FixedDetailOptions>hideDetailAreas,highDetailsMode,hScroll(309),vScroll(1972)</FixedDetailOptions>
  </Meta>
  <Operation ID="0" Label="Query With Test Data Support" Name="QueryWithTestDataSupport">
    <Meta>
      <SpecialPurpose>QueryStorable</SpecialPurpose>
    </Meta>
    <Input>
      <Data ID="22" Label="Selection mask" ReferenceName="SelectionMask" ReferencePath="xnwh.persistence" VariableName="selectionMask">
        <Target RefID="20"/>
        <Target RefID="58"/>
        <Target RefID="63"/>
        <Target RefID="340"/>
        <Target RefID="471"/>
        <Target RefID="540"/>
      </Data>
      <Data ID="24" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition24">
        <Target RefID="20"/>
        <Target RefID="58"/>
        <Target RefID="81"/>
        <Target RefID="84"/>
        <Target RefID="73"/>
      </Data>
      <Data ID="23" Label="Query parameter" ReferenceName="QueryParameter" ReferencePath="xnwh.persistence" VariableName="queryParameter">
        <Target RefID="51"/>
        <Target RefID="58"/>
      </Data>
    </Input>
    <Output>
      <Data ID="27" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable27">
        <Source RefID="28"/>
      </Data>
    </Output>
    <Throws>
      <Exception Label="No Matching Test Data Available" ReferenceName="NoMatchingTestDataAvailable" ReferencePath="xdev.xtestfactory.infrastructure.exceptions" VariableName="noMatchingTestDataAvailable"/>
      <Exception Label="Test Case Not Found For ID" ReferenceName="TestCaseNotFoundForID" ReferencePath="xdev.xtestfactory.infrastructure.exceptions" VariableName="testCaseNotFoundForID"/>
      <Exception Label="XMOM Storable Access Exception" ReferenceName="XMOMStorableAccessException" ReferencePath="xnwh.persistence" VariableName="xMOMStorableAccessException"/>
    </Throws>
    <Mappings ID="51" Label="Mapping">
      <Source RefID="23"/>
      <Target RefID="49"/>
      <Meta>
        <FixedDetailOptions>openConfiguration</FixedDetailOptions>
      </Meta>
      <Input>
        <Data ID="50" Label="Query parameter" ReferenceName="QueryParameter" ReferencePath="xnwh.persistence" VariableName="queryParameter50"/>
        <Source RefID="23"/>
      </Input>
      <Output>
        <Data ID="52" Label="Query parameter" ReferenceName="QueryParameter" ReferencePath="xnwh.persistence" VariableName="queryParameter52"/>
        <Target RefID="49"/>
      </Output>
      <Mapping>%1%~=%0%</Mapping>
      <Mapping>%1%.maxObjects~="1"</Mapping>
    </Mappings>
    <Function ID="20" Label="Query One To Determine Type">
      <Source RefID="22"/>
      <Source RefID="19"/>
      <Source RefID="24"/>
      <Source RefID="49"/>
      <Target RefID="21"/>
      <Target RefID="19"/>
      <Meta>
        <FixedDetailOptions>openDocumentation</FixedDetailOptions>
      </Meta>
      <Invoke Operation="Query" ServiceID="19">
        <Source RefID="22"/>
        <Source RefID="24"/>
        <Source RefID="49">
          <Meta>
            <LinkType>UserConnected</LinkType>
          </Meta>
        </Source>
      </Invoke>
      <Receive ServiceID="19">
        <Target RefID="21"/>
      </Receive>
    </Function>
    <Choice ID="29" TypeName="BaseChoiceTypeFormula" TypePath="server">
      <Source RefID="21"/>
      <Target RefID="519"/>
      <Input>
        <Data ID="75" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable75"/>
        <Source RefID="21">
          <Meta>
            <LinkType>UserConnected</LinkType>
          </Meta>
        </Source>
      </Input>
      <Case ID="79" Label="true" Premise="length(%0%)&gt;&quot;0&quot;">
        <Mappings ID="54" Label="Mapping">
          <Source RefID="21"/>
          <Target RefID="41"/>
          <Meta>
            <FixedDetailOptions>openConfiguration</FixedDetailOptions>
          </Meta>
          <Input>
            <Data ID="53" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable53"/>
            <Source RefID="21"/>
          </Input>
          <Output>
            <Data ID="55" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable55"/>
            <Target RefID="41"/>
          </Output>
          <Mapping>%1%~=%0%["0"]</Mapping>
        </Mappings>
        <Choice ID="2" TypeName="BaseChoiceTypeFormula" TypePath="server">
          <Source RefID="41"/>
          <Target RefID="518"/>
          <Input>
            <Data ID="76" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable76"/>
            <Source RefID="41">
              <Meta>
                <LinkType>UserConnected</LinkType>
              </Meta>
            </Source>
          </Input>
          <Case ID="77" Label="true" Premise="typeof(%0%,&quot;xdev.xtestfactory.infrastructure.storables.TestData&quot;)">
            <Parallel ID="314">
              <Serial ID="312">
                <Function ID="178" Label="Get Test Case ID">
                  <Source RefID="126"/>
                  <Target RefID="179"/>
                  <Target RefID="126"/>
                  <Invoke Operation="getTestCaseID" ServiceID="126"/>
                  <Receive ServiceID="126">
                    <Target RefID="179"/>
                  </Receive>
                </Function>
                <Function ID="207" Label="Get Test Case By ID">
                  <Source RefID="179"/>
                  <Source RefID="211"/>
                  <Target RefID="208"/>
                  <Target RefID="211"/>
                  <Invoke Operation="GetTestCaseByID" ServiceID="211">
                    <Source RefID="179"/>
                  </Invoke>
                  <Receive ServiceID="211">
                    <Target RefID="208"/>
                  </Receive>
                </Function>
              </Serial>
              <Mappings ID="264" Label="Cast">
                <Source RefID="41"/>
                <Target RefID="265"/>
                <Input>
                  <Data ID="497" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable497"/>
                  <Source RefID="41">
                    <Meta>
                      <LinkType>UserConnected</LinkType>
                    </Meta>
                  </Source>
                </Input>
                <Output>
                  <Data ID="263" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData263"/>
                  <Target RefID="265"/>
                </Output>
                <Mapping>%1%~=%0%</Mapping>
              </Mappings>
            </Parallel>
            <Mappings ID="471">
              <Source RefID="22"/>
              <Target RefID="470"/>
              <Meta>
                <IsCondition>true</IsCondition>
              </Meta>
              <Input>
                <Data ID="477" Label="Selection mask" ReferenceName="SelectionMask" ReferencePath="xnwh.persistence" VariableName="selectionMask477"/>
                <Source RefID="22">
                  <Meta>
                    <LinkType>UserConnected</LinkType>
                  </Meta>
                </Source>
              </Input>
              <Output>
                <Data ID="472" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition472"/>
                <Target RefID="470"/>
              </Output>
              <Mapping>%1%.formula=concat("(%0%.testDataFullQualifiedStorableName==\"",replaceall(replaceall(%0%.rootType,"\\\\","\\\\\\\\"),"\"","\\\\\""),"\")")</Mapping>
            </Mappings>
            <Function ID="469" Label="Obtain corresponding Test data meta data">
              <Source RefID="110"/>
              <Source RefID="470"/>
              <Source RefID="473"/>
              <Source RefID="474"/>
              <Target RefID="110"/>
              <Target RefID="476"/>
              <Meta>
                <QueryFilter>
                  <Condition>%0%.testDataFullQualifiedStorableName==%1%.rootType</Condition>
                </QueryFilter>
              </Meta>
              <Invoke Operation="query" ServiceID="110">
                <Source RefID="473">
                  <Meta>
                    <LinkType>Constant</LinkType>
                  </Meta>
                </Source>
                <Source RefID="470">
                  <Meta>
                    <LinkType>UserConnected</LinkType>
                  </Meta>
                </Source>
                <Source RefID="474">
                  <Meta>
                    <LinkType>Constant</LinkType>
                  </Meta>
                </Source>
              </Invoke>
              <Receive ServiceID="110">
                <Target RefID="476"/>
              </Receive>
            </Function>
            <Mappings ID="483" Label="Pick First (And only)">
              <Source RefID="476"/>
              <Target RefID="481"/>
              <Input>
                <Data ID="482" IsList="true" Label="Test Data Meta Data" ReferenceName="TestDataMetaData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataMetaData482"/>
                <Source RefID="476"/>
              </Input>
              <Output>
                <Data ID="489" Label="Test Data Meta Data" ReferenceName="TestDataMetaData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataMetaData0"/>
                <Target RefID="481"/>
              </Output>
              <Mapping>%1%~=%0%["0"]</Mapping>
            </Mappings>
            <Choice ID="504" TypeName="BaseChoiceTypeFormula" TypePath="server">
              <Source RefID="481"/>
              <Target RefID="515"/>
              <Input>
                <Data ID="526" Label="Test Data Meta Data" ReferenceName="TestDataMetaData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataMetaData526"/>
                <Source RefID="481">
                  <Meta>
                    <LinkType>UserConnected</LinkType>
                  </Meta>
                </Source>
              </Input>
              <Case ID="528" Label="true" Premise="%0%.oneTimeTestData">
                <Mappings ID="217">
                  <Source RefID="179"/>
                  <Source RefID="481"/>
                  <Target RefID="216"/>
                  <Meta>
                    <IsCondition>true</IsCondition>
                  </Meta>
                  <Input>
                    <Data ID="267" Label="Test Case ID" ReferenceName="TestCaseID" ReferencePath="xdev.xtestfactory.infrastructure.datatypes" VariableName="testCaseID267"/>
                    <Source RefID="179">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                  </Input>
                  <Input>
                    <Data ID="484" Label="Test Data Meta Data" ReferenceName="TestDataMetaData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataMetaData484"/>
                    <Source RefID="481">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                  </Input>
                  <Output>
                    <Data ID="218" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition218"/>
                    <Target RefID="216"/>
                  </Output>
                  <Mapping>%2%.formula=concat("(%0%.tDMetaDataID==\"",replaceall(replaceall(%1%.iD,"\\\\","\\\\\\\\"),"\"","\\\\\""),"\") &amp;&amp; (%0%.occupyingTestCaseID==\"",replaceall(replaceall(%0%.iD,"\\\\","\\\\\\\\"),"\"","\\\\\""),"\")")</Mapping>
                </Mappings>
                <Function ID="215" Label="Obtain all Usage Information for this test case and test data - latest generation ID first">
                  <Source RefID="216"/>
                  <Source RefID="110"/>
                  <Source RefID="505"/>
                  <Source RefID="506"/>
                  <Target RefID="222"/>
                  <Target RefID="110"/>
                  <Meta>
                    <QueryFilter>
                      <Condition>%0%.tDMetaDataID==%2%.iD</Condition>
                      <Condition>%0%.occupyingTestCaseID==%1%.iD</Condition>
                    </QueryFilter>
                  </Meta>
                  <Invoke Operation="query" ServiceID="110">
                    <Source RefID="505">
                      <Meta>
                        <LinkType>Constant</LinkType>
                      </Meta>
                    </Source>
                    <Source RefID="216">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                    <Source RefID="506">
                      <Meta>
                        <LinkType>Constant</LinkType>
                      </Meta>
                    </Source>
                  </Invoke>
                  <Receive ServiceID="110">
                    <Target RefID="222"/>
                  </Receive>
                </Function>
                <Choice ID="81" TypeName="BaseChoiceTypeFormula" TypePath="server">
                  <Source RefID="24"/>
                  <Target RefID="86"/>
                  <Input>
                    <Data ID="89" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition89"/>
                    <Source RefID="24">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                  </Input>
                  <Input>
                    <Data ID="92" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition92"/>
                    <Source RefID="24">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                  </Input>
                  <Case ID="90" Label="true" Premise="%1%.formula==null||length(%0%.formula)==&quot;0&quot;">
                    <Mappings ID="84" Label="Append &quot;not used&quot; filter - no other condition">
                      <Source RefID="24"/>
                      <Target RefID="85"/>
                      <Meta>
                        <Documentation>TODO: occupyingTestCaseID auswerten und umsetzen</Documentation>
                      </Meta>
                      <Input>
                        <Data ID="82" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition82"/>
                        <Source RefID="24">
                          <Meta>
                            <LinkType>UserConnected</LinkType>
                          </Meta>
                        </Source>
                      </Input>
                      <Output>
                        <Data ID="83" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition83"/>
                        <Target RefID="85"/>
                      </Output>
                      <Mapping>%1%~=%0%</Mapping>
                      <Mapping>%1%.formula~="%0%.used!=\"true\""</Mapping>
                    </Mappings>
                    <Assign ID="87">
                      <Source RefID="85"/>
                      <Target RefID="86"/>
                      <Copy>
                        <Source RefID="85"/>
                        <Target RefID="86"/>
                      </Copy>
                    </Assign>
                  </Case>
                  <Case ID="91" Label="false">
                    <Mappings ID="73" Label="Append &quot;not used&quot; filter - other exists condition">
                      <Source RefID="24"/>
                      <Target RefID="71"/>
                      <Input>
                        <Data ID="72" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition72"/>
                        <Source RefID="24">
                          <Meta>
                            <LinkType>UserConnected</LinkType>
                          </Meta>
                        </Source>
                      </Input>
                      <Output>
                        <Data ID="74" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition74"/>
                        <Target RefID="71"/>
                      </Output>
                      <Mapping>%1%~=%0%</Mapping>
                      <Mapping>%1%.formula~=concat(%0%.formula," &amp;&amp; %0%.used!=\"true\"")</Mapping>
                    </Mappings>
                    <Assign ID="88">
                      <Source RefID="71"/>
                      <Target RefID="86"/>
                      <Copy>
                        <Source RefID="71"/>
                        <Target RefID="86"/>
                      </Copy>
                    </Assign>
                  </Case>
                </Choice>
                <Foreach ID="509">
                  <Source RefID="222"/>
                  <Target RefID="510"/>
                  <InputList RefID="222">
                    <Data ID="508" Label="test data usage info" ReferenceName="TestDataUsageInfo" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataUsageInfo508">
                      <Target RefID="268"/>
                      <Target RefID="545"/>
                    </Data>
                  </InputList>
                  <OutputList RefID="510">
                    <Data ID="507" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData_0">
                      <Source RefID="268"/>
                      <Source RefID="291"/>
                      <Source RefID="292"/>
                    </Data>
                  </OutputList>
                  <Choice ID="268" TypeName="BaseChoiceTypeFormula" TypePath="server">
                    <Source RefID="265"/>
                    <Source RefID="508"/>
                    <Target RefID="507"/>
                    <Input>
                      <Data ID="315" Label="Test Data Usage Info" ReferenceName="TestDataUsageInfo" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataUsageInfo315"/>
                      <Source RefID="508"/>
                    </Input>
                    <Input>
                      <Data ID="316" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData316"/>
                      <Source RefID="265">
                        <Meta>
                          <LinkType>UserConnected</LinkType>
                        </Meta>
                      </Source>
                    </Input>
                    <Case ID="321" Label="true" Premise="%0%.testDataID==%1%.iD">
                      <Choice ID="271" TypeName="BaseChoiceTypeFormula" TypePath="server">
                        <Source RefID="265"/>
                        <Target RefID="281"/>
                        <Input>
                          <Data ID="317" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData"/>
                          <Source RefID="265"/>
                        </Input>
                        <Case ID="319" Label="true" Premise="%0%.used==&quot;false&quot;">
                          <Mappings ID="277" Label="Use already loaded object">
                            <Source RefID="265"/>
                            <Target RefID="275"/>
                            <Meta>
                              <FixedDetailOptions>openConfiguration</FixedDetailOptions>
                            </Meta>
                            <Input>
                              <Data ID="276" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData276"/>
                              <Source RefID="265"/>
                            </Input>
                            <Output>
                              <Data ID="318" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData0"/>
                              <Target RefID="275"/>
                            </Output>
                            <Mapping>%1%["0"]~=%0%</Mapping>
                          </Mappings>
                          <Assign ID="282">
                            <Source RefID="275"/>
                            <Target RefID="281"/>
                            <Copy>
                              <Source RefID="275"/>
                              <Target RefID="281"/>
                            </Copy>
                          </Assign>
                        </Case>
                        <Case ID="320" Label="false">
                          <Mappings ID="285" Label="Cant use this object">
                            <Target RefID="280"/>
                            <Meta>
                              <FixedDetailOptions>openConfiguration</FixedDetailOptions>
                            </Meta>
                            <Output>
                              <Data ID="284" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData284"/>
                              <Target RefID="280"/>
                            </Output>
                            <Mapping>%0%~=null</Mapping>
                          </Mappings>
                          <Assign ID="283">
                            <Source RefID="280"/>
                            <Target RefID="281"/>
                            <Copy>
                              <Source RefID="280"/>
                              <Target RefID="281"/>
                            </Copy>
                          </Assign>
                        </Case>
                      </Choice>
                      <Assign ID="291">
                        <Source RefID="281"/>
                        <Target RefID="507"/>
                        <Copy>
                          <Source RefID="281"/>
                          <Target RefID="507"/>
                        </Copy>
                      </Assign>
                    </Case>
                    <Case ID="322" Label="false">
                      <Mappings ID="545" Label="Append Test Data ID filter">
                        <Source RefID="86"/>
                        <Source RefID="508"/>
                        <Target RefID="544"/>
                        <Meta>
                          <FixedDetailOptions>openConfiguration</FixedDetailOptions>
                        </Meta>
                        <Input>
                          <Data ID="561" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition0"/>
                          <Source RefID="86">
                            <Meta>
                              <LinkType>UserConnected</LinkType>
                            </Meta>
                          </Source>
                        </Input>
                        <Input>
                          <Data ID="547" Label="Test Data Usage Info" ReferenceName="TestDataUsageInfo" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataUsageInfo547"/>
                          <Source RefID="508">
                            <Meta>
                              <LinkType>UserConnected</LinkType>
                            </Meta>
                          </Source>
                        </Input>
                        <Output>
                          <Data ID="546" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition546"/>
                          <Target RefID="544"/>
                        </Output>
                        <Mapping>%2%.formula~=concat(%0%.formula," &amp;&amp; %0%.iD==\"",%1%.testDataID,"\"")</Mapping>
                      </Mappings>
                      <Function ID="540" Label="Find Test Data object for this usage info">
                        <Source RefID="19"/>
                        <Source RefID="22"/>
                        <Source RefID="544"/>
                        <Source RefID="49"/>
                        <Target RefID="19"/>
                        <Target RefID="541"/>
                        <Invoke Operation="Query" ServiceID="19">
                          <Source RefID="22"/>
                          <Source RefID="544">
                            <Meta>
                              <LinkType>UserConnected</LinkType>
                            </Meta>
                          </Source>
                          <Source RefID="49">
                            <Meta>
                              <LinkType>UserConnected</LinkType>
                            </Meta>
                          </Source>
                        </Invoke>
                        <Receive ServiceID="19">
                          <Target RefID="541"/>
                        </Receive>
                      </Function>
                      <Choice ID="548" TypeName="BaseChoiceTypeFormula" TypePath="server">
                        <Source RefID="541"/>
                        <Target RefID="555"/>
                        <Input>
                          <Data ID="562" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable562"/>
                          <Source RefID="541">
                            <Meta>
                              <LinkType>UserConnected</LinkType>
                            </Meta>
                          </Source>
                        </Input>
                        <Case ID="563" Label="true" Premise="length(%0%)&gt;&quot;0&quot;">
                          <Mappings ID="553" Label="Use found object">
                            <Source RefID="541"/>
                            <Target RefID="551"/>
                            <Meta>
                              <FixedDetailOptions>openConfiguration</FixedDetailOptions>
                            </Meta>
                            <Input>
                              <Data ID="552" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable552"/>
                              <Source RefID="541">
                                <Meta>
                                  <LinkType>UserConnected</LinkType>
                                </Meta>
                              </Source>
                            </Input>
                            <Output>
                              <Data ID="554" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData554"/>
                              <Target RefID="551"/>
                            </Output>
                            <Mapping>%1%["0"]~=%0%["0"]</Mapping>
                          </Mappings>
                          <Assign ID="556">
                            <Source RefID="551"/>
                            <Target RefID="555"/>
                            <Copy>
                              <Source RefID="551"/>
                              <Target RefID="555"/>
                            </Copy>
                          </Assign>
                        </Case>
                        <Case ID="564" Label="false">
                          <Mappings ID="288" Label="Cant use this object">
                            <Target RefID="287"/>
                            <Output>
                              <Data ID="286" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData286"/>
                              <Target RefID="287"/>
                            </Output>
                            <Mapping>%0%~=null</Mapping>
                          </Mappings>
                          <Assign ID="557">
                            <Source RefID="287"/>
                            <Target RefID="555"/>
                            <Copy>
                              <Source RefID="287"/>
                              <Target RefID="555"/>
                            </Copy>
                          </Assign>
                        </Case>
                      </Choice>
                      <Assign ID="292">
                        <Source RefID="555"/>
                        <Target RefID="507"/>
                        <Copy>
                          <Source RefID="555"/>
                          <Target RefID="507"/>
                        </Copy>
                      </Assign>
                    </Case>
                  </Choice>
                </Foreach>
                <Choice ID="293" TypeName="BaseChoiceTypeFormula" TypePath="server">
                  <Source RefID="510"/>
                  <Target RefID="566"/>
                  <Input>
                    <Data ID="323" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData323"/>
                    <Source RefID="510"/>
                  </Input>
                  <Case ID="324" Label="true" Premise="length(%0%)&gt;&quot;0&quot;">
                    <Mappings ID="307" Label="Use first loaded object">
                      <Source RefID="510"/>
                      <Target RefID="565"/>
                      <Input>
                        <Data ID="306" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData306"/>
                        <Source RefID="510"/>
                      </Input>
                      <Output>
                        <Data ID="308" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData308"/>
                        <Target RefID="565"/>
                      </Output>
                      <Mapping>%1%~=%0%["0"]</Mapping>
                    </Mappings>
                    <Assign ID="301">
                      <Source RefID="565"/>
                      <Target RefID="566"/>
                      <Copy>
                        <Source RefID="565"/>
                        <Target RefID="566"/>
                      </Copy>
                    </Assign>
                  </Case>
                  <Case ID="330" Label="false">
                    <Function ID="63" Label="Query">
                      <Source RefID="22"/>
                      <Source RefID="86"/>
                      <Source RefID="49"/>
                      <Source RefID="19"/>
                      <Target RefID="64"/>
                      <Target RefID="19"/>
                      <Meta>
                        <FixedDetailOptions>openDocumentation</FixedDetailOptions>
                        <FixedHeight>32</FixedHeight>
                        <FixedWidth>185</FixedWidth>
                        <Documentation>Query for unused test data. The following steps will try to select the test data that is not yet connected to other test cases.</Documentation>
                      </Meta>
                      <Invoke Operation="Query" ServiceID="19">
                        <Source RefID="22"/>
                        <Source RefID="86">
                          <Meta>
                            <LinkType>UserConnected</LinkType>
                          </Meta>
                        </Source>
                        <Source RefID="49">
                          <Meta>
                            <LinkType>UserConnected</LinkType>
                          </Meta>
                        </Source>
                      </Invoke>
                      <Receive ServiceID="19">
                        <Target RefID="64"/>
                      </Receive>
                    </Function>
                    <Mappings ID="305" Label="These Storables are all unused Test Data objects">
                      <Source RefID="64"/>
                      <Target RefID="299"/>
                      <Input>
                        <Data ID="303" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable303"/>
                        <Source RefID="64">
                          <Meta>
                            <LinkType>UserConnected</LinkType>
                          </Meta>
                        </Source>
                      </Input>
                      <Output>
                        <Data ID="304" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData304"/>
                        <Target RefID="299"/>
                      </Output>
                      <Mapping>%1%~=%0%</Mapping>
                    </Mappings>
                    <Choice ID="404" TypeName="BaseChoiceTypeFormula" TypePath="server">
                      <Source RefID="299"/>
                      <Input>
                        <Data ID="439" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData439"/>
                        <Source RefID="299">
                          <Meta>
                            <LinkType>UserConnected</LinkType>
                          </Meta>
                        </Source>
                      </Input>
                      <Case ID="441" Label="true" Premise="length(%0%)==&quot;0&quot;">
                        <Mappings ID="340" Label="Build Exception">
                          <Source RefID="22"/>
                          <Target RefID="337"/>
                          <Input>
                            <Data ID="339" Label="Selection mask" ReferenceName="SelectionMask" ReferencePath="xnwh.persistence" VariableName="selectionMask339"/>
                            <Source RefID="22"/>
                          </Input>
                          <Output>
                            <Exception ID="341" Label="No Matching Test Data Available" ReferenceName="NoMatchingTestDataAvailable" ReferencePath="xdev.xtestfactory.infrastructure.exceptions" VariableName="noMatchingTestDataAvailable341"/>
                            <Target RefID="337"/>
                          </Output>
                          <Mapping>%1%.testDataType~=%0%.rootType</Mapping>
                        </Mappings>
                        <Throw ExceptionID="337" ID="338" Label="Throw No Matching Test Data Available">
                          <Source RefID="337"/>
                        </Throw>
                        <Assign ID="440"/>
                      </Case>
                      <Case ID="443" Label="false">
                        <Assign ID="442"/>
                      </Case>
                    </Choice>
                    <Foreach ID="371">
                      <Source RefID="299"/>
                      <Target RefID="417"/>
                      <InputList RefID="299">
                        <Data ID="370" Label="test data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData370">
                          <Target RefID="369"/>
                          <Target RefID="375"/>
                          <Target RefID="414"/>
                        </Data>
                      </InputList>
                      <OutputList RefID="417">
                        <Data ID="416" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData416">
                          <Source RefID="369"/>
                          <Source RefID="402"/>
                          <Source RefID="403"/>
                        </Data>
                      </OutputList>
                      <Choice ID="369" TypeName="BaseChoiceTypeFormula" TypePath="server">
                        <Source RefID="370"/>
                        <Target RefID="416"/>
                        <Input>
                          <Data ID="444" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData444"/>
                          <Source RefID="370">
                            <Meta>
                              <LinkType>UserConnected</LinkType>
                            </Meta>
                          </Source>
                        </Input>
                        <Case ID="448" Label="true" Premise="%0%.iD!=&quot;0&quot;">
                          <Mappings ID="375">
                            <Source RefID="370"/>
                            <Target RefID="374"/>
                            <Meta>
                              <IsCondition>true</IsCondition>
                            </Meta>
                            <Input>
                              <Data ID="381" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData381"/>
                              <Source RefID="370">
                                <Meta>
                                  <LinkType>UserConnected</LinkType>
                                </Meta>
                              </Source>
                            </Input>
                            <Output>
                              <Data ID="376" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition376"/>
                              <Target RefID="374"/>
                            </Output>
                            <Mapping>%1%.formula=concat("(%0%.testDataID==\"",replaceall(replaceall(%0%.iD,"\\\\","\\\\\\\\"),"\"","\\\\\""),"\")")</Mapping>
                          </Mappings>
                          <Function ID="373" Label="Find usage info for this Test Data object (by other Test Case)">
                            <Source RefID="110"/>
                            <Source RefID="374"/>
                            <Source RefID="377"/>
                            <Source RefID="378"/>
                            <Target RefID="110"/>
                            <Target RefID="380"/>
                            <Meta>
                              <QueryFilter>
                                <Condition>%0%.testDataID==%1%.iD</Condition>
                              </QueryFilter>
                            </Meta>
                            <Invoke Operation="query" ServiceID="110">
                              <Source RefID="377">
                                <Meta>
                                  <LinkType>Constant</LinkType>
                                </Meta>
                              </Source>
                              <Source RefID="374">
                                <Meta>
                                  <LinkType>UserConnected</LinkType>
                                </Meta>
                              </Source>
                              <Source RefID="378">
                                <Meta>
                                  <LinkType>Constant</LinkType>
                                </Meta>
                              </Source>
                            </Invoke>
                            <Receive ServiceID="110">
                              <Target RefID="380"/>
                            </Receive>
                          </Function>
                          <Choice ID="384" TypeName="BaseChoiceTypeFormula" TypePath="server">
                            <Source RefID="380"/>
                            <Target RefID="415"/>
                            <Input>
                              <Data ID="445" IsList="true" Label="Test Data Usage Info" ReferenceName="TestDataUsageInfo" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataUsageInfo445"/>
                              <Source RefID="380">
                                <Meta>
                                  <LinkType>UserConnected</LinkType>
                                </Meta>
                              </Source>
                            </Input>
                            <Case ID="446" Label="true" Premise="length(%0%)&gt;&quot;0&quot;">
                              <Mappings ID="411" Label="Empty List">
                                <Target RefID="409"/>
                                <Output>
                                  <Data ID="410" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData410"/>
                                  <Target RefID="409"/>
                                </Output>
                                <Mapping>%0%~=null</Mapping>
                              </Mappings>
                              <Assign ID="393">
                                <Source RefID="409"/>
                                <Target RefID="415"/>
                                <Copy>
                                  <Source RefID="409"/>
                                  <Target RefID="415"/>
                                </Copy>
                              </Assign>
                            </Case>
                            <Case ID="447" Label="false">
                              <Mappings ID="414" Label="Add To List">
                                <Source RefID="370"/>
                                <Target RefID="413"/>
                                <Input>
                                  <Data ID="418" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData418"/>
                                  <Source RefID="370">
                                    <Meta>
                                      <LinkType>UserConnected</LinkType>
                                    </Meta>
                                  </Source>
                                </Input>
                                <Output>
                                  <Data ID="412" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData412"/>
                                  <Target RefID="413"/>
                                </Output>
                                <Mapping>%1%["0"]~=%0%</Mapping>
                              </Mappings>
                              <Assign ID="394">
                                <Source RefID="413"/>
                                <Target RefID="415"/>
                                <Copy>
                                  <Source RefID="413"/>
                                  <Target RefID="415"/>
                                </Copy>
                              </Assign>
                            </Case>
                          </Choice>
                          <Assign ID="402">
                            <Source RefID="415"/>
                            <Target RefID="416"/>
                            <Copy>
                              <Source RefID="415"/>
                              <Target RefID="416"/>
                            </Copy>
                          </Assign>
                        </Case>
                        <Case ID="449" Label="false">
                          <Mappings ID="399" Label="Empty List (should never happen)">
                            <Target RefID="406"/>
                            <Output>
                              <Data ID="405" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData405"/>
                              <Target RefID="406"/>
                            </Output>
                            <Mapping>%0%~=null</Mapping>
                          </Mappings>
                          <Assign ID="403">
                            <Source RefID="406"/>
                            <Target RefID="416"/>
                            <Copy>
                              <Source RefID="406"/>
                              <Target RefID="416"/>
                            </Copy>
                          </Assign>
                        </Case>
                      </Choice>
                    </Foreach>
                    <Choice ID="309" TypeName="BaseChoiceTypeFormula" TypePath="server">
                      <Source RefID="417"/>
                      <Target RefID="432"/>
                      <Input>
                        <Data ID="450" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData450"/>
                        <Source RefID="417">
                          <Meta>
                            <LinkType>UserConnected</LinkType>
                          </Meta>
                        </Source>
                      </Input>
                      <Case ID="327" Label="true" Premise="length(%0%)==&quot;0&quot;">
                        <Mappings ID="427" Label="Steal one of the connected Test Data entries">
                          <Source RefID="299"/>
                          <Target RefID="425"/>
                          <Meta>
                            <FixedDetailOptions>openConfiguration</FixedDetailOptions>
                          </Meta>
                          <Input>
                            <Data ID="426" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData426"/>
                            <Source RefID="299">
                              <Meta>
                                <LinkType>UserConnected</LinkType>
                              </Meta>
                            </Source>
                          </Input>
                          <Output>
                            <Data ID="428" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData428"/>
                            <Target RefID="425"/>
                          </Output>
                          <Mapping>%1%["0"]~=%0%["0"]</Mapping>
                        </Mappings>
                        <Assign ID="326">
                          <Source RefID="425"/>
                          <Target RefID="432"/>
                          <Copy>
                            <Source RefID="425"/>
                            <Target RefID="432"/>
                          </Copy>
                        </Assign>
                      </Case>
                      <Case ID="329" Label="false">
                        <Mappings ID="434" Label="Use one of the unconnected entries">
                          <Source RefID="417"/>
                          <Target RefID="431"/>
                          <Meta>
                            <FixedDetailOptions>openConfiguration</FixedDetailOptions>
                          </Meta>
                          <Input>
                            <Data ID="433" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData433"/>
                            <Source RefID="417">
                              <Meta>
                                <LinkType>UserConnected</LinkType>
                              </Meta>
                            </Source>
                          </Input>
                          <Output>
                            <Data ID="435" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData435"/>
                            <Target RefID="431"/>
                          </Output>
                          <Mapping>%1%["0"]~=%0%["0"]</Mapping>
                        </Mappings>
                        <Assign ID="328">
                          <Source RefID="431"/>
                          <Target RefID="432"/>
                          <Copy>
                            <Source RefID="431"/>
                            <Target RefID="432"/>
                          </Copy>
                        </Assign>
                      </Case>
                    </Choice>
                    <Mappings ID="229" Label="Use first">
                      <Source RefID="432"/>
                      <Target RefID="232"/>
                      <Input>
                        <Data ID="567" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData567"/>
                        <Source RefID="432">
                          <Meta>
                            <LinkType>UserConnected</LinkType>
                          </Meta>
                        </Source>
                      </Input>
                      <Output>
                        <Data ID="231" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData231"/>
                        <Target RefID="232"/>
                      </Output>
                      <Mapping>%1%~=%0%["0"]</Mapping>
                    </Mappings>
                    <Assign ID="302">
                      <Source RefID="232"/>
                      <Target RefID="566"/>
                      <Copy>
                        <Source RefID="232"/>
                        <Target RefID="566"/>
                      </Copy>
                    </Assign>
                  </Case>
                </Choice>
                <Function ID="248" Label="Get Test Data Generation ID">
                  <Source RefID="126"/>
                  <Target RefID="249"/>
                  <Target RefID="126"/>
                  <Invoke Operation="getTestDataGenerationID" ServiceID="126"/>
                  <Receive ServiceID="126">
                    <Target RefID="249"/>
                  </Receive>
                </Function>
                <Mappings ID="255" Label="Build new Usage Info object">
                  <Source RefID="179"/>
                  <Source RefID="481"/>
                  <Source RefID="249"/>
                  <Source RefID="566"/>
                  <Target RefID="253"/>
                  <Input>
                    <Data ID="254" Label="Test Case ID" ReferenceName="TestCaseID" ReferencePath="xdev.xtestfactory.infrastructure.datatypes" VariableName="testCaseID254"/>
                    <Source RefID="179"/>
                  </Input>
                  <Input>
                    <Data ID="256" Label="Test Data Generation ID" ReferenceName="TestDataGenerationID" ReferencePath="xdev.xtestfactory.infrastructure.datatypes" VariableName="testDataGenerationID256"/>
                    <Source RefID="249"/>
                  </Input>
                  <Input>
                    <Data ID="485" Label="Test Data Meta Data" ReferenceName="TestDataMetaData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataMetaData485"/>
                    <Source RefID="481">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                  </Input>
                  <Input>
                    <Data ID="260" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData260"/>
                    <Source RefID="566">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                  </Input>
                  <Output>
                    <Data ID="257" Label="Test Data Usage Info" ReferenceName="TestDataUsageInfo" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataUsageInfo257"/>
                    <Target RefID="253"/>
                  </Output>
                  <Mapping>%4%.generationID~=%1%.iD</Mapping>
                  <Mapping>%4%.occupyingTestCaseID~=%0%.iD</Mapping>
                  <Mapping>%4%.tDMetaDataID~=%2%.iD</Mapping>
                  <Mapping>%4%.testDataID~=%3%.iD</Mapping>
                </Mappings>
                <Function ID="261" Label="Store Usage Info">
                  <Source RefID="110"/>
                  <Source RefID="511"/>
                  <Source RefID="253"/>
                  <Target RefID="110"/>
                  <Invoke Operation="store" ServiceID="110">
                    <Source RefID="253">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                    <Source RefID="511">
                      <Meta>
                        <LinkType>Constant</LinkType>
                      </Meta>
                    </Source>
                  </Invoke>
                  <Receive ServiceID="110"/>
                </Function>
                <Mappings ID="464" Label="Cast Back">
                  <Source RefID="566"/>
                  <Target RefID="460"/>
                  <Input>
                    <Data ID="568" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData568"/>
                    <Source RefID="566">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                  </Input>
                  <Output>
                    <Data ID="465" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable465"/>
                    <Target RefID="460"/>
                  </Output>
                  <Mapping>%1%["0"]~=%0%</Mapping>
                </Mappings>
                <Assign ID="516">
                  <Source RefID="460"/>
                  <Target RefID="515"/>
                  <Copy>
                    <Source RefID="460"/>
                    <Target RefID="515"/>
                  </Copy>
                </Assign>
              </Case>
              <Case ID="529" Label="false">
                <Mappings ID="521" Label="Test Data won't wear - just use the query results from above">
                  <Source RefID="21"/>
                  <Target RefID="514"/>
                  <Meta>
                    <FixedHeight>79</FixedHeight>
                    <FixedWidth>121</FixedWidth>
                  </Meta>
                  <Input>
                    <Data ID="520" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable520"/>
                    <Source RefID="21">
                      <Meta>
                        <LinkType>UserConnected</LinkType>
                      </Meta>
                    </Source>
                  </Input>
                  <Output>
                    <Data ID="522" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable522"/>
                    <Target RefID="514"/>
                  </Output>
                  <Mapping>%1%~=%0%</Mapping>
                </Mappings>
                <Assign ID="517">
                  <Source RefID="514"/>
                  <Target RefID="515"/>
                  <Copy>
                    <Source RefID="514"/>
                    <Target RefID="515"/>
                  </Copy>
                </Assign>
              </Case>
            </Choice>
            <Assign ID="66">
              <Source RefID="515"/>
              <Target RefID="518"/>
              <Copy>
                <Source RefID="515"/>
                <Target RefID="518"/>
              </Copy>
            </Assign>
          </Case>
          <Case ID="78" Label="false">
            <Function ID="58" Label="Query">
              <Source RefID="19"/>
              <Source RefID="22"/>
              <Source RefID="24"/>
              <Source RefID="23"/>
              <Target RefID="19"/>
              <Target RefID="59"/>
              <Meta>
                <FixedDetailOptions>openDocumentation</FixedDetailOptions>
                <FixedHeight>32</FixedHeight>
                <FixedWidth>185</FixedWidth>
                <Documentation>Default Query</Documentation>
              </Meta>
              <Invoke Operation="Query" ServiceID="19">
                <Source RefID="22"/>
                <Source RefID="24"/>
                <Source RefID="23">
                  <Meta>
                    <LinkType>UserConnected</LinkType>
                  </Meta>
                </Source>
              </Invoke>
              <Receive ServiceID="19">
                <Target RefID="59"/>
              </Receive>
            </Function>
            <Assign ID="67">
              <Source RefID="59"/>
              <Target RefID="518"/>
              <Copy>
                <Source RefID="59"/>
                <Target RefID="518"/>
              </Copy>
            </Assign>
          </Case>
        </Choice>
        <Assign ID="39">
          <Source RefID="518"/>
          <Target RefID="519"/>
          <Copy>
            <Source RefID="518"/>
            <Target RefID="519"/>
          </Copy>
        </Assign>
      </Case>
      <Case ID="80" Label="false">
        <Mappings ID="61" Label="Create Empty List">
          <Target RefID="32"/>
          <Output>
            <Data ID="62" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable62"/>
            <Target RefID="32"/>
          </Output>
          <Mapping>%0%~=null</Mapping>
        </Mappings>
        <Assign ID="40">
          <Source RefID="32"/>
          <Target RefID="519"/>
          <Copy>
            <Source RefID="32"/>
            <Target RefID="519"/>
          </Copy>
        </Assign>
      </Case>
    </Choice>
    <ServiceReference ID="19" Label="Query" ReferenceName="Query" ReferencePath="xnwh.persistence">
      <Source RefID="20"/>
      <Source RefID="58"/>
      <Source RefID="63"/>
      <Source RefID="540"/>
      <Target RefID="20"/>
      <Target RefID="58"/>
      <Target RefID="63"/>
      <Target RefID="540"/>
    </ServiceReference>
    <Data ID="21" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable8">
      <Source RefID="20"/>
      <Target RefID="29"/>
      <Target RefID="54"/>
      <Target RefID="521"/>
    </Data>
    <Data ID="32" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable0">
      <Source RefID="61"/>
      <Target RefID="40"/>
    </Data>
    <Data ID="41" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable41">
      <Source RefID="54"/>
      <Target RefID="2"/>
      <Target RefID="264"/>
    </Data>
    <Data ID="49" Label="Query parameter" ReferenceName="QueryParameter" ReferencePath="xnwh.persistence" VariableName="queryParameter0">
      <Source RefID="51"/>
      <Target RefID="20"/>
      <Target RefID="63"/>
      <Target RefID="540"/>
    </Data>
    <Data ID="59" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable59">
      <Source RefID="58"/>
      <Target RefID="67"/>
    </Data>
    <Data ID="64" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable64">
      <Source RefID="63"/>
      <Target RefID="305"/>
    </Data>
    <Data ID="71" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition">
      <Source RefID="73"/>
      <Target RefID="88"/>
    </Data>
    <Data ID="85" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition85">
      <Source RefID="84"/>
      <Target RefID="87"/>
    </Data>
    <Data ID="86" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition86">
      <Source RefID="81"/>
      <Source RefID="87"/>
      <Source RefID="88"/>
      <Target RefID="63"/>
      <Target RefID="545"/>
    </Data>
    <ServiceReference ID="110" Label="Persistence Services" ReferenceName="PersistenceServices.PersistenceServices" ReferencePath="xnwh.persistence">
      <Source RefID="373"/>
      <Source RefID="469"/>
      <Source RefID="215"/>
      <Source RefID="261"/>
      <Target RefID="373"/>
      <Target RefID="469"/>
      <Target RefID="215"/>
      <Target RefID="261"/>
    </ServiceReference>
    <ServiceReference ID="126" Label="TestFactoryIntegration" ReferenceName="TestFactoryIntegration.TestFactoryIntegration" ReferencePath="xdev.xtestfactory.infrastructure.services">
      <Source RefID="178"/>
      <Source RefID="248"/>
      <Target RefID="178"/>
      <Target RefID="248"/>
    </ServiceReference>
    <Data ID="179" Label="Test Case ID" ReferenceName="TestCaseID" ReferencePath="xdev.xtestfactory.infrastructure.datatypes" VariableName="testCaseID">
      <Source RefID="178"/>
      <Target RefID="207"/>
      <Target RefID="255"/>
      <Target RefID="217"/>
    </Data>
    <Data ID="208" Label="Test Case" ReferenceName="TestCase" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testCase208">
      <Source RefID="207"/>
    </Data>
    <ServiceReference ID="211" Label="Get Test Case By ID" ReferenceName="GetTestCaseByID" ReferencePath="xdev.xtestfactory.infrastructure.util">
      <Source RefID="207"/>
      <Target RefID="207"/>
    </ServiceReference>
    <Data ID="216" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition216">
      <Source RefID="217"/>
      <Target RefID="215"/>
    </Data>
    <Data ID="222" IsList="true" Label="Test Data Usage Info" ReferenceName="TestDataUsageInfo" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataUsageInfo">
      <Source RefID="215"/>
      <Target RefID="509"/>
    </Data>
    <Data ID="232" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData232">
      <Source RefID="229"/>
      <Target RefID="302"/>
    </Data>
    <Data ID="249" Label="Test Data Generation ID" ReferenceName="TestDataGenerationID" ReferencePath="xdev.xtestfactory.infrastructure.datatypes" VariableName="testDataGenerationID">
      <Source RefID="248"/>
      <Target RefID="255"/>
    </Data>
    <Data ID="253" Label="Test Data Usage Info" ReferenceName="TestDataUsageInfo" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataUsageInfo253">
      <Source RefID="255"/>
      <Target RefID="261"/>
    </Data>
    <Data ID="265" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData265">
      <Source RefID="264"/>
      <Target RefID="268"/>
      <Target RefID="271"/>
      <Target RefID="277"/>
    </Data>
    <Data ID="275" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData275">
      <Source RefID="277"/>
      <Target RefID="282"/>
    </Data>
    <Data ID="280" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData280">
      <Source RefID="285"/>
      <Target RefID="283"/>
    </Data>
    <Data ID="281" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData281">
      <Source RefID="271"/>
      <Source RefID="283"/>
      <Source RefID="282"/>
      <Target RefID="291"/>
    </Data>
    <Data ID="287" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData287">
      <Source RefID="288"/>
      <Target RefID="557"/>
    </Data>
    <Data ID="299" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData299">
      <Source RefID="305"/>
      <Target RefID="371"/>
      <Target RefID="404"/>
      <Target RefID="427"/>
    </Data>
    <Exception ID="337" Label="No Matching Test Data Available" ReferenceName="NoMatchingTestDataAvailable" ReferencePath="xdev.xtestfactory.infrastructure.exceptions" VariableName="noMatchingTestDataAvailable337">
      <Source RefID="340"/>
      <Target RefID="338"/>
    </Exception>
    <Data ID="374" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition374">
      <Source RefID="375"/>
      <Target RefID="373"/>
    </Data>
    <Data ID="377" Label="Selection mask" ReferenceName="SelectionMask" ReferencePath="xnwh.persistence" VariableName="selectionMask377">
      <Target RefID="373"/>
      <Data ID="451" Label="Root type" VariableName="rootType">
        <Meta>
          <Type>String</Type>
        </Meta>
        <Value>xdev.xtestfactory.infrastructure.storables.TestDataUsageInfo</Value>
      </Data>
    </Data>
    <Data ID="378" Label="Query parameter" ReferenceName="QueryParameter" ReferencePath="xnwh.persistence" VariableName="queryParameter378">
      <Target RefID="373"/>
      <Data ID="452" Label="Max objects" VariableName="maxObjects">
        <Meta>
          <Type>int</Type>
        </Meta>
        <Value>-1</Value>
      </Data>
      <Data ID="453" Label="Query history" VariableName="queryHistory">
        <Meta>
          <Type>boolean</Type>
        </Meta>
        <Value>false</Value>
      </Data>
      <Data ID="454" IsList="true" Label="Sort criterion" ReferenceName="SortCriterion" ReferencePath="xnwh.persistence" VariableName="sortCriterion"/>
    </Data>
    <Data ID="380" IsList="true" Label="Test Data Usage Info" ReferenceName="TestDataUsageInfo" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataUsageInfo380">
      <Source RefID="373"/>
      <Target RefID="384"/>
    </Data>
    <Data ID="406" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData406">
      <Source RefID="399"/>
      <Target RefID="403"/>
    </Data>
    <Data ID="409" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData409">
      <Source RefID="411"/>
      <Target RefID="393"/>
    </Data>
    <Data ID="413" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData413">
      <Source RefID="414"/>
      <Target RefID="394"/>
    </Data>
    <Data ID="415" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData415">
      <Source RefID="384"/>
      <Source RefID="393"/>
      <Source RefID="394"/>
      <Target RefID="402"/>
    </Data>
    <Data ID="417" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData417">
      <Source RefID="371"/>
      <Target RefID="309"/>
      <Target RefID="434"/>
    </Data>
    <Data ID="425" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData425">
      <Source RefID="427"/>
      <Target RefID="326"/>
    </Data>
    <Data ID="431" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData431">
      <Source RefID="434"/>
      <Target RefID="328"/>
    </Data>
    <Data ID="432" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData432">
      <Source RefID="309"/>
      <Source RefID="328"/>
      <Source RefID="326"/>
      <Target RefID="229"/>
    </Data>
    <Data ID="460" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable460">
      <Source RefID="464"/>
      <Target RefID="516"/>
    </Data>
    <Data ID="470" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition470">
      <Source RefID="471"/>
      <Target RefID="469"/>
    </Data>
    <Data ID="473" Label="Selection mask" ReferenceName="SelectionMask" ReferencePath="xnwh.persistence" VariableName="selectionMask473">
      <Target RefID="469"/>
      <Data ID="490" Label="Root type" VariableName="rootType">
        <Meta>
          <Type>String</Type>
        </Meta>
        <Value>xdev.xtestfactory.infrastructure.storables.TestDataMetaData</Value>
      </Data>
    </Data>
    <Data ID="474" Label="Query parameter" ReferenceName="QueryParameter" ReferencePath="xnwh.persistence" VariableName="queryParameter474">
      <Target RefID="469"/>
      <Data ID="491" Label="Max objects" VariableName="maxObjects">
        <Meta>
          <Type>int</Type>
        </Meta>
        <Value>-1</Value>
      </Data>
      <Data ID="492" Label="Query history" VariableName="queryHistory">
        <Meta>
          <Type>boolean</Type>
        </Meta>
        <Value>false</Value>
      </Data>
      <Data ID="493" IsList="true" Label="Sort criterion" ReferenceName="SortCriterion" ReferencePath="xnwh.persistence" VariableName="sortCriterion"/>
    </Data>
    <Data ID="476" IsList="true" Label="Test Data Meta Data" ReferenceName="TestDataMetaData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataMetaData">
      <Source RefID="469"/>
      <Target RefID="483"/>
    </Data>
    <Data ID="481" Label="Test Data Meta Data" ReferenceName="TestDataMetaData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testDataMetaData481">
      <Source RefID="483"/>
      <Target RefID="217"/>
      <Target RefID="255"/>
      <Target RefID="504"/>
    </Data>
    <Data ID="505" Label="Selection mask" ReferenceName="SelectionMask" ReferencePath="xnwh.persistence" VariableName="const_SelectionMask">
      <Target RefID="215"/>
      <Data ID="530" Label="Root type" VariableName="rootType">
        <Meta>
          <Type>String</Type>
        </Meta>
        <Value>xdev.xtestfactory.infrastructure.storables.TestDataUsageInfo</Value>
      </Data>
    </Data>
    <Data ID="506" Label="Query parameter" ReferenceName="QueryParameter" ReferencePath="xnwh.persistence" VariableName="const_QueryParameter">
      <Target RefID="215"/>
      <Data ID="531" Label="Max objects" VariableName="maxObjects">
        <Meta>
          <Type>int</Type>
        </Meta>
        <Value>-1</Value>
      </Data>
      <Data ID="532" Label="Query history" VariableName="queryHistory">
        <Meta>
          <Type>boolean</Type>
        </Meta>
        <Value>false</Value>
      </Data>
      <Data ID="536" IsList="true" Label="Sort criterion" ReferenceName="SortCriterion" ReferencePath="xnwh.persistence" VariableName="sortCriterion">
        <Value>
          <Data ID="535" Label="Sort criterion" ReferenceName="SortCriterion" ReferencePath="xnwh.persistence">
            <Data ID="533" Label="Criterion" VariableName="criterion">
              <Meta>
                <Type>String</Type>
              </Meta>
              <Value>%0%.generationID</Value>
            </Data>
            <Data ID="534" Label="Reverse" VariableName="reverse">
              <Meta>
                <Type>boolean</Type>
              </Meta>
              <Value>true</Value>
            </Data>
          </Data>
        </Value>
      </Data>
    </Data>
    <Data ID="510" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData507">
      <Source RefID="509"/>
      <Target RefID="293"/>
      <Target RefID="307"/>
    </Data>
    <Data ID="511" Label="Store parameter" ReferenceName="StoreParameter" ReferencePath="xnwh.persistence" VariableName="storeParameter">
      <Target RefID="261"/>
      <Data ID="537" Label="Historize previous object" VariableName="historizePreviousObject">
        <Meta>
          <Type>boolean</Type>
        </Meta>
        <Value>false</Value>
      </Data>
      <Data ID="538" Label="Keep meta field data" VariableName="keepMetaFieldData">
        <Meta>
          <Type>boolean</Type>
        </Meta>
        <Value>false</Value>
      </Data>
      <Data ID="539" Label="Force recursive store" VariableName="forceRecursiveStore">
        <Meta>
          <Type>boolean</Type>
        </Meta>
        <Value>false</Value>
      </Data>
    </Data>
    <Data ID="514" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable">
      <Source RefID="521"/>
      <Target RefID="517"/>
    </Data>
    <Data ID="515" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable515">
      <Source RefID="504"/>
      <Source RefID="516"/>
      <Source RefID="517"/>
      <Target RefID="66"/>
    </Data>
    <Data ID="518" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable518">
      <Source RefID="2"/>
      <Source RefID="66"/>
      <Source RefID="67"/>
      <Target RefID="39"/>
    </Data>
    <Data ID="519" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable519">
      <Source RefID="29"/>
      <Source RefID="40"/>
      <Source RefID="39"/>
      <Target RefID="28"/>
    </Data>
    <Data ID="541" IsList="true" Label="Storable" ReferenceName="Storable" ReferencePath="xnwh.persistence" VariableName="storable541">
      <Source RefID="540"/>
      <Target RefID="548"/>
      <Target RefID="553"/>
    </Data>
    <Data ID="544" Label="Filter condition" ReferenceName="FilterCondition" ReferencePath="xnwh.persistence" VariableName="filterCondition544">
      <Source RefID="545"/>
      <Target RefID="540"/>
    </Data>
    <Data ID="551" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData551">
      <Source RefID="553"/>
      <Target RefID="556"/>
    </Data>
    <Data ID="555" IsList="true" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData555">
      <Source RefID="548"/>
      <Source RefID="557"/>
      <Source RefID="556"/>
      <Target RefID="292"/>
    </Data>
    <Data ID="565" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData565">
      <Source RefID="307"/>
      <Target RefID="301"/>
    </Data>
    <Data ID="566" Label="Test Data" ReferenceName="TestData" ReferencePath="xdev.xtestfactory.infrastructure.storables" VariableName="testData566">
      <Source RefID="293"/>
      <Source RefID="301"/>
      <Source RefID="302"/>
      <Target RefID="255"/>
      <Target RefID="464"/>
    </Data>
    <Assign ID="28">
      <Source RefID="519"/>
      <Target RefID="27"/>
      <Copy>
        <Source RefID="519">
          <Meta>
            <LinkType>UserConnected</LinkType>
          </Meta>
        </Source>
        <Target RefID="27"/>
      </Copy>
    </Assign>
  </Operation>
</Service>
